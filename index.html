<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>QR Scanner</title>
<style>
  body {
    font-family: sans-serif;
    text-align: center;
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
    padding: 40px;
  }
  input {
    margin-top: 20px;
  }
  #result {
    margin-top: 30px;
    padding: 10px;
    background: rgba(0,0,0,0.3);
    border-radius: 10px;
    word-break: break-word;
  }
</style>
</head>
<body>
  <h1>📷 اسکن QR از گالری</h1>
  <input type="file" id="fileInput" accept="image/*">
  <div id="result">نتیجه در اینجا نمایش داده می‌شود</div>

<script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
<script>
const input = document.getElementById('fileInput');
const result = document.getElementById('result');

input.addEventListener('change', async (e) => {
  const file = e.target.files[0];
  if (!file) return;
  result.textContent = "در حال خواندن...";
  try {
    const qr = new Html5Qrcode("result");
    const decoded = await qr.scanFile(file, true);
    qr.clear();
    result.textContent = "🔍 نتیجه: " + decoded;
  } catch (err) {
    result.textContent = "QR یافت نشد یا تصویر معتبر نیست.";
  }
});
</script>
</body>
</html>
